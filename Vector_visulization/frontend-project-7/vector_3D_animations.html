<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Vector Operations</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.min.js"></script>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #1a2a6c, #2a3a7c);
        }
        #container {
            position: relative;
            width: 100vw;
            height: 100vh;
        }
        #info-panel {
            position: absolute;
            top: 80px;
            left: 10px;
            background: rgba(255, 255, 255, 0.95);
            padding: 15px;
            border-radius: 8px;
            max-width: 350px;
            z-index: 100;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            border: 1px solid #e0e0e0;
        }
        #vector-inputs {
            position: absolute;
            top: 80px;
            right: 10px;
            background: rgba(255, 255, 255, 0.95);
            padding: 15px;
            border-radius: 8px;
            max-width: 300px;
            z-index: 100;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            border: 1px solid #e0e0e0;
        }
        #controls {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 255, 255, 0.95);
            padding: 15px;
            border-radius: 8px;
            display: flex;
            gap: 10px;
            z-index: 100;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            flex-wrap: wrap;
            justify-content: center;
            border: 1px solid #e0e0e0;
        }
        button {
            padding: 8px 15px;
            border: none;
            border-radius: 4px;
            background: #4a6fa5;
            color: white;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
        }
        button:hover {
            background: #3a5a8c;
            transform: translateY(-2px);
        }
        button.active {
            background: #2c4a7a;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        h2 {
            margin-top: 0;
            color: #2c3e50;
            border-bottom: 2px solid #4a6fa5;
            padding-bottom: 5px;
        }
        .vector-info {
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }
        .vector-color {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 5px;
        }
        .input-group {
            margin-bottom: 10px;
        }
        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #2c3e50;
        }
        .input-row {
            display: flex;
            gap: 5px;
            margin-bottom: 5px;
        }
        .input-row input {
            flex: 1;
            padding: 5px;
            border: 1px solid #ccc;
            border-radius: 4px;
            transition: border 0.3s;
        }
        .input-row input:focus {
            border-color: #4a6fa5;
            outline: none;
        }
        .coordinate-display {
            position: absolute;
            background: rgba(255, 255, 255, 0.9);
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 12px;
            pointer-events: none;
            z-index: 50;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            border: 1px solid #e0e0e0;
            font-weight: bold;
        }
        #instructions {
            position: absolute;
            bottom: 90px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 255, 255, 0.9);
            padding: 10px 15px;
            border-radius: 8px;
            font-size: 14px;
            z-index: 100;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            text-align: center;
        }
        .scalar-input {
            display: none;
        }
        .navigation-buttons {
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 15px;
            z-index: 100;
            background: rgba(255, 255, 255, 0.95);
            padding: 10px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            border: 1px solid #e0e0e0;
        }
        .nav-btn {
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.95);
            color: #2c3e50;
            text-decoration: none;
            border-radius: 4px;
            font-weight: bold;
            transition: all 0.3s;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            border: 1px solid #e0e0e0;
            white-space: nowrap;
            text-align: center;
            min-width: 120px;
        }
        .nav-btn:hover {
            background: rgba(255, 255, 255, 1);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }
        .accessibility-panel {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(255, 255, 255, 0.95);
            padding: 10px;
            border-radius: 8px;
            z-index: 1000;
        }
        .accessibility-toggle {
            background: none;
            border: 1px solid #4a6fa5;
            color: #4a6fa5;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            margin: 2px;
            font-size: 12px;
        }
        .accessibility-toggle.active {
            background: #4a6fa5;
            color: white;
        }
        .high-contrast {
            filter: contrast(200%);
        }
        .high-contrast-vectors .vector-color[style*="ff0000"] {
            background-color: #ff0000 !important;
            border: 2px solid white;
        }
        .text-alternative {
            display: none;
            background: rgba(255, 255, 255, 0.9);
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
        }
        .vector-controls:focus-within {
            outline: 3px solid #ff0000;
            outline-offset: 2px;
        }
        .sr-announce {
            position: absolute;
            left: -10000px;
            top: auto;
            width: 1px;
            height: 1px;
            overflow: hidden;
        }
        .language-selector {
            margin-top: 10px;
        }
        .language-selector select {
            font-size: 12px;
            padding: 3px;
            border: 1px solid #4a6fa5;
            border-radius: 4px;
        }
        @media (max-width: 1200px) {
            .navigation-buttons {
                flex-wrap: wrap;
                justify-content: center;
                max-width: 90%;
                gap: 10px;
            }
            .nav-btn {
                min-width: 100px;
                padding: 8px 15px;
                font-size: 14px;
            }
        }
        @media (max-width: 768px) {
            #info-panel, #vector-inputs {
                max-width: 280px;
            }
            .navigation-buttons {
                flex-direction: column;
                align-items: center;
                gap: 8px;
            }
            .nav-btn {
                width: 100%;
                min-width: auto;
            }
        }
    </style>
</head>
<body>
    <div id="container">
        <div class="navigation-buttons">
            <a href="vector_physics_applications.html" class="nav-btn" id="nav-back">Back to Physics Applications</a>
            <a href="Vector_visulization.html" class="nav-btn" id="nav-basic">Basic Visualization</a>
            <a href="vectors_advanced_operations.html" class="nav-btn" id="nav-advanced">Advanced Operations</a>
        </div>
        <div class="accessibility-panel">
            <strong id="accessibility-label">Accessibility:</strong>
            <button class="accessibility-toggle" onclick="toggleHighContrast()" aria-pressed="false" id="btn-high-contrast">High Contrast</button>
            <button class="accessibility-toggle" onclick="toggleVectorLabels()" aria-pressed="false" id="btn-large-labels">Large Labels</button>
            <button class="accessibility-toggle" onclick="describeScene()" id="btn-describe">Describe Scene</button>
            <div class="language-selector">
                <label for="vector-language" id="language-label">Language:</label>
                <select id="vector-language" onchange="updateVectorLanguage(this.value)">
                    <option value="en">English</option>
                    <option value="es">Español</option>
                    <option value="fr">Français</option>
                    <option value="de">Deutsch</option>
                    <option value="zh">中文</option>
                    <option value="ja">日本語</option>
                    <option value="ar">العربية</option>
                </select>
            </div>
        </div>
        <div id="text-alternative" class="text-alternative" aria-live="polite"></div>
        <div id="sr-announce" class="sr-announce" aria-live="polite" aria-atomic="true"></div>
        <div id="info-panel">
            <h2 id="panel-title">Vector Operations</h2>
            <div class="vector-info">
                <span class="vector-color" style="background-color: #ff0000;"></span>
                <strong id="vector-a-label">Vector A</strong>
            </div>
            <div class="vector-info">
                <span class="vector-color" style="background-color: #0000ff;"></span>
                <strong id="vector-b-label">Vector B</strong>
            </div>
            <div class="vector-info">
                <span class="vector-color" style="background-color: #00ff00;"></span>
                <strong id="result-label">Result</strong>
            </div>
            <div id="operation-info">
                <p id="operation-default">Select an operation to visualize</p>
            </div>
        </div>
        <div id="vector-inputs">
            <h2 id="inputs-title">Vector Inputs</h2>
            <div class="input-group">
                <label id="vector-a-title">Vector A</label>
                <div class="input-row">
                    <input type="number" id="a-x" value="2" step="0.1" placeholder="X" aria-label="Vector A X coordinate">
                    <input type="number" id="a-y" value="3" step="0.1" placeholder="Y" aria-label="Vector A Y coordinate">
                    <input type="number" id="a-z" value="1" step="0.1" placeholder="Z" aria-label="Vector A Z coordinate">
                </div>
            </div>
            <div class="input-group">
                <label id="vector-b-title">Vector B</label>
                <div class="input-row">
                    <input type="number" id="b-x" value="1" step="0.1" placeholder="X" aria-label="Vector B X coordinate">
                    <input type="number" id="b-y" value="-1" step="0.1" placeholder="Y" aria-label="Vector B Y coordinate">
                    <input type="number" id="b-z" value="2" step="0.1" placeholder="Z" aria-label="Vector B Z coordinate">
                </div>
            </div>
            <div class="input-group scalar-input" id="scalar-input-group">
                <label id="scalar-label">Scalar (for multiplication)</label>
                <div class="input-row">
                    <input type="number" id="scalar" value="2" step="0.1" aria-label="Scalar value">
                </div>
            </div>
            <button id="update-btn">Update Vectors</button>
        </div>
        <div id="controls">
            <button id="add-btn">Addition</button>
            <button id="sub-btn">Subtraction</button>
            <button id="mult-btn">Scalar Multiplication</button>
            <button id="cross-btn">Cross Product</button>
            <button id="work-btn">Work (Dot Product)</button>
            <button id="torque-btn">Torque</button>
        </div>
        <div id="instructions">
            Drag to rotate • Scroll to zoom • Right-click to pan
        </div>
    </div>

    <script>
        // Enhanced Multilingual Support with Dynamic Content
        const vectorTranslations = {
            en: {
                navBack: "Back to Physics Applications",
                navBasic: "Basic Visualization",
                navAdvanced: "Advanced Operations",
                accessibilityLabel: "Accessibility:",
                btnHighContrast: "High Contrast",
                btnLargeLabels: "Large Labels",
                btnDescribe: "Describe Scene",
                languageLabel: "Language:",
                panelTitle: "Vector Operations",
                vectorALabel: "Vector A",
                vectorBLabel: "Vector B",
                resultLabel: "Result",
                operationDefault: "Select an operation to visualize",
                inputsTitle: "Vector Inputs",
                vectorATitle: "Vector A",
                vectorBTitle: "Vector B",
                scalarLabel: "Scalar (for multiplication)",
                updateBtn: "Update Vectors",
                addBtn: "Addition",
                subBtn: "Subtraction",
                multBtn: "Scalar Multiplication",
                crossBtn: "Cross Product",
                workBtn: "Work (Dot Product)",
                torqueBtn: "Torque",
                instructions: "Drag to rotate • Scroll to zoom • Right-click to pan",
                additionDesc: "Vector Addition: A + B combines vectors head-to-tail",
                subtractionDesc: "Vector Subtraction: A - B finds the difference between vectors",
                multiplicationDesc: "Scalar Multiplication scales vector magnitude",
                crossProductDesc: "Cross Product produces a vector perpendicular to both input vectors",
                workDesc: "Work (Dot Product) calculates energy transfer through force and displacement",
                torqueDesc: "Torque measures rotational force using position and force vectors",
                highContrastOn: "High contrast mode enabled",
                highContrastOff: "High contrast mode disabled",
                largeLabelsOn: "Large labels enabled",
                largeLabelsOff: "Large labels disabled",
                sceneDescription: "3D vector visualization showing {operation} operation. Red vector A, blue vector B, green result vector. Use mouse to rotate, zoom, and pan.",
                vector: "Vector",
                notUsed: "Not Used",
                force: "Force",
                displacement: "Displacement",
                position: "Position",
                forceVector: "Force Vector",
                displacementVector: "Displacement Vector",
                positionVector: "Position Vector",
                workUnit: "J",
                magnitude: "Magnitude",
                direction: "Direction",
                angle: "Angle",
                degrees: "degrees"
            },
            es: {
                navBack: "Volver a Aplicaciones de Física",
                navBasic: "Visualización Básica",
                navAdvanced: "Operaciones Avanzadas",
                accessibilityLabel: "Accesibilidad:",
                btnHighContrast: "Alto Contraste",
                btnLargeLabels: "Etiquetas Grandes",
                btnDescribe: "Describir Escena",
                languageLabel: "Idioma:",
                panelTitle: "Operaciones Vectoriales",
                vectorALabel: "Vector A",
                vectorBLabel: "Vector B",
                resultLabel: "Resultado",
                operationDefault: "Selecciona una operación para visualizar",
                inputsTitle: "Entradas de Vectores",
                vectorATitle: "Vector A",
                vectorBTitle: "Vector B",
                scalarLabel: "Escalar (para multiplicación)",
                updateBtn: "Actualizar Vectores",
                addBtn: "Suma",
                subBtn: "Resta",
                multBtn: "Multiplicación Escalar",
                crossBtn: "Producto Cruz",
                workBtn: "Trabajo (Producto Punto)",
                torqueBtn: "Torque",
                instructions: "Arrastrar para rotar • Scroll para zoom • Clic derecho para mover",
                additionDesc: "Suma Vectorial: A + B combina vectores cabeza con cola",
                subtractionDesc: "Resta Vectorial: A - B encuentra la diferencia entre vectores",
                multiplicationDesc: "Multiplicación Escalar escala la magnitud del vector",
                crossProductDesc: "Producto Cruz produce un vector perpendicular a ambos vectores de entrada",
                workDesc: "Trabajo (Producto Punto) calcula transferencia de energía mediante fuerza y desplazamiento",
                torqueDesc: "Torque mide fuerza rotacional usando vectores de posición y fuerza",
                highContrastOn: "Modo de alto contraste activado",
                highContrastOff: "Modo de alto contraste desactivado",
                largeLabelsOn: "Etiquetas grandes activadas",
                largeLabelsOff: "Etiquetas grandes desactivadas",
                sceneDescription: "Visualización 3D de vectores mostrando operación {operation}. Vector rojo A, vector azul B, vector resultado verde. Usa el mouse para rotar, hacer zoom y mover.",
                vector: "Vector",
                notUsed: "No Usado",
                force: "Fuerza",
                displacement: "Desplazamiento",
                position: "Posición",
                forceVector: "Vector de Fuerza",
                displacementVector: "Vector de Desplazamiento",
                positionVector: "Vector de Posición",
                workUnit: "J",
                magnitude: "Magnitud",
                direction: "Dirección",
                angle: "Ángulo",
                degrees: "grados"
            },
            fr: {
                navBack: "Retour aux Applications Physiques",
                navBasic: "Visualisation de Base",
                navAdvanced: "Opérations Avancées",
                accessibilityLabel: "Accessibilité:",
                btnHighContrast: "Contraste Élevé",
                btnLargeLabels: "Grandes Étiquettes",
                btnDescribe: "Décrire la Scène",
                languageLabel: "Langue:",
                panelTitle: "Opérations Vectorielles",
                vectorALabel: "Vecteur A",
                vectorBLabel: "Vecteur B",
                resultLabel: "Résultat",
                operationDefault: "Sélectionnez une opération à visualiser",
                inputsTitle: "Entrées Vectorielles",
                vectorATitle: "Vecteur A",
                vectorBTitle: "Vecteur B",
                scalarLabel: "Scalaire (pour multiplication)",
                updateBtn: "Mettre à Jour les Vecteurs",
                addBtn: "Addition",
                subBtn: "Soustraction",
                multBtn: "Multiplication Scalaire",
                crossBtn: "Produit Vectoriel",
                workBtn: "Travail (Produit Scalaire)",
                torqueBtn: "Couple",
                instructions: "Glisser pour tourner • Scroll pour zoomer • Clic droit pour déplacer",
                additionDesc: "Addition Vectorielle: A + B combine les vecteurs tête-à-queue",
                subtractionDesc: "Soustraction Vectorielle: A - B trouve la différence entre les vecteurs",
                multiplicationDesc: "Multiplication Scalaire modifie l'ampleur du vecteur",
                crossProductDesc: "Produit Vectoriel produit un vecteur perpendiculaire aux deux vecteurs d'entrée",
                workDesc: "Travail (Produit Scalaire) calcule le transfert d'énergie par force et déplacement",
                torqueDesc: "Couple mesure la force rotationnelle utilisant les vecteurs de position et de force",
                highContrastOn: "Mode contraste élevé activé",
                highContrastOff: "Mode contraste élevé désactivé",
                largeLabelsOn: "Grandes étiquettes activées",
                largeLabelsOff: "Grandes étiquettes désactivées",
                sceneDescription: "Visualisation 3D de vecteurs montrant l'opération {operation}. Vecteur rouge A, vecteur bleu B, vecteur résultat vert. Utilisez la souris pour tourner, zoomer et déplacer.",
                vector: "Vecteur",
                notUsed: "Non Utilisé",
                force: "Force",
                displacement: "Déplacement",
                position: "Position",
                forceVector: "Vecteur de Force",
                displacementVector: "Vecteur de Déplacement",
                positionVector: "Vecteur de Position",
                workUnit: "J",
                magnitude: "Magnitude",
                direction: "Direction",
                angle: "Angle",
                degrees: "degrés"
            },
            de: {
                navBack: "Zurück zu Physik-Anwendungen",
                navBasic: "Grundlegende Visualisierung",
                navAdvanced: "Erweiterte Operationen",
                accessibilityLabel: "Barrierefreiheit:",
                btnHighContrast: "Hoher Kontrast",
                btnLargeLabels: "Große Beschriftungen",
                btnDescribe: "Szene beschreiben",
                languageLabel: "Sprache:",
                panelTitle: "Vektoroperationen",
                vectorALabel: "Vektor A",
                vectorBLabel: "Vektor B",
                resultLabel: "Ergebnis",
                operationDefault: "Wählen Sie eine Operation zur Visualisierung",
                inputsTitle: "Vektoreingaben",
                vectorATitle: "Vektor A",
                vectorBTitle: "Vektor B",
                scalarLabel: "Skalar (für Multiplikation)",
                updateBtn: "Vektoren aktualisieren",
                addBtn: "Addition",
                subBtn: "Subtraktion",
                multBtn: "Skalare Multiplikation",
                crossBtn: "Kreuzprodukt",
                workBtn: "Arbeit (Skalarprodukt)",
                torqueBtn: "Drehmoment",
                instructions: "Ziehen zum Drehen • Scrollen zum Zoomen • Rechtsklick zum Schwenken",
                additionDesc: "Vektoraddition: A + B kombiniert Vektoren kopf-an-schwanz",
                subtractionDesc: "Vektorsubtraktion: A - B findet die Differenz zwischen Vektoren",
                multiplicationDesc: "Skalare Multiplikation skaliert die Vektorgröße",
                crossProductDesc: "Kreuzprodukt erzeugt einen Vektor senkrecht zu beiden Eingabevektoren",
                workDesc: "Arbeit (Skalarprodukt) berechnet Energieübertragung durch Kraft und Verschiebung",
                torqueDesc: "Drehmoment misst Rotationskraft unter Verwendung von Positions- und Kraftvektoren",
                highContrastOn: "Hoher Kontrastmodus aktiviert",
                highContrastOff: "Hoher Kontrastmodus deaktiviert",
                largeLabelsOn: "Große Beschriftungen aktiviert",
                largeLabelsOff: "Große Beschriftungen deaktiviert",
                sceneDescription: "3D-Vektorvisualisierung zeigt {operation}-Operation. Roter Vektor A, blauer Vektor B, grüner Ergebnisvektor. Verwenden Sie die Maus zum Drehen, Zoomen und Schwenken.",
                vector: "Vektor",
                notUsed: "Nicht verwendet",
                force: "Kraft",
                displacement: "Verschiebung",
                position: "Position",
                forceVector: "Kraftvektor",
                displacementVector: "Verschiebungsvektor",
                positionVector: "Positionsvektor",
                workUnit: "J",
                magnitude: "Betrag",
                direction: "Richtung",
                angle: "Winkel",
                degrees: "Grad"
            },
            zh: {
                navBack: "返回物理应用",
                navBasic: "基础可视化",
                navAdvanced: "高级操作",
                accessibilityLabel: "无障碍功能:",
                btnHighContrast: "高对比度",
                btnLargeLabels: "大标签",
                btnDescribe: "描述场景",
                languageLabel: "语言:",
                panelTitle: "向量运算",
                vectorALabel: "向量 A",
                vectorBLabel: "向量 B",
                resultLabel: "结果",
                operationDefault: "选择一个操作进行可视化",
                inputsTitle: "向量输入",
                vectorATitle: "向量 A",
                vectorBTitle: "向量 B",
                scalarLabel: "标量（用于乘法）",
                updateBtn: "更新向量",
                addBtn: "加法",
                subBtn: "减法",
                multBtn: "标量乘法",
                crossBtn: "叉积",
                workBtn: "功（点积）",
                torqueBtn: "扭矩",
                instructions: "拖动旋转 • 滚轮缩放 • 右键平移",
                additionDesc: "向量加法：A + B 将向量首尾相连",
                subtractionDesc: "向量减法：A - B 找出向量之间的差异",
                multiplicationDesc: "标量乘法缩放向量大小",
                crossProductDesc: "叉积产生垂直于两个输入向量的向量",
                workDesc: "功（点积）计算通过力和位移的能量传递",
                torqueDesc: "扭矩使用位置和力向量测量旋转力",
                highContrastOn: "高对比度模式已启用",
                highContrastOff: "高对比度模式已禁用",
                largeLabelsOn: "大标签已启用",
                largeLabelsOff: "大标签已禁用",
                sceneDescription: "3D向量可视化显示{operation}操作。红色向量A，蓝色向量B，绿色结果向量。使用鼠标旋转、缩放和平移。",
                vector: "向量",
                notUsed: "未使用",
                force: "力",
                displacement: "位移",
                position: "位置",
                forceVector: "力向量",
                displacementVector: "位移向量",
                positionVector: "位置向量",
                workUnit: "焦耳",
                magnitude: "大小",
                direction: "方向",
                angle: "角度",
                degrees: "度"
            },
            ja: {
                navBack: "物理アプリケーションに戻る",
                navBasic: "基本ビジュアライゼーション",
                navAdvanced: "高度な操作",
                accessibilityLabel: "アクセシビリティ:",
                btnHighContrast: "ハイコントラスト",
                btnLargeLabels: "大きなラベル",
                btnDescribe: "シーンを説明",
                languageLabel: "言語:",
                panelTitle: "ベクトル演算",
                vectorALabel: "ベクトル A",
                vectorBLabel: "ベクトル B",
                resultLabel: "結果",
                operationDefault: "可視化する操作を選択",
                inputsTitle: "ベクトル入力",
                vectorATitle: "ベクトル A",
                vectorBTitle: "ベクトル B",
                scalarLabel: "スカラー（乗算用）",
                updateBtn: "ベクトルを更新",
                addBtn: "加算",
                subBtn: "減算",
                multBtn: "スカラー乗算",
                crossBtn: "外積",
                workBtn: "仕事（内積）",
                torqueBtn: "トルク",
                instructions: "ドラッグで回転 • スクロールでズーム • 右クリックでパン",
                additionDesc: "ベクトル加算: A + B はベクトルを頭から尾に結合します",
                subtractionDesc: "ベクトル減算: A - B はベクトル間の差を見つけます",
                multiplicationDesc: "スカラー乗算はベクトルの大きさをスケーリングします",
                crossProductDesc: "外積は両方の入力ベクトルに垂直なベクトルを生成します",
                workDesc: "仕事（内積）は力と変位によるエネルギー伝達を計算します",
                torqueDesc: "トルクは位置と力ベクトルを使用して回転力を測定します",
                highContrastOn: "ハイコントラストモードが有効になりました",
                highContrastOff: "ハイコントラストモードが無効になりました",
                largeLabelsOn: "大きなラベルが有効になりました",
                largeLabelsOff: "大きなラベルが無効になりました",
                sceneDescription: "{operation}操作を示す3Dベクトル可視化。赤いベクトルA、青いベクトルB、緑の結果ベクトル。マウスを使用して回転、ズーム、パンします。",
                vector: "ベクトル",
                notUsed: "使用しない",
                force: "力",
                displacement: "変位",
                position: "位置",
                forceVector: "力ベクトル",
                displacementVector: "変位ベクトル",
                positionVector: "位置ベクトル",
                workUnit: "J",
                magnitude: "大きさ",
                direction: "方向",
                angle: "角度",
                degrees: "度"
            },
            ar: {
                navBack: "العودة إلى تطبيقات الفيزياء",
                navBasic: "التصور الأساسي",
                navAdvanced: "العمليات المتقدمة",
                accessibilityLabel: "إمكانية الوصول:",
                btnHighContrast: "تباين عالي",
                btnLargeLabels: "تسميات كبيرة",
                btnDescribe: "وصف المشهد",
                languageLabel: "اللغة:",
                panelTitle: "عمليات المتجهات",
                vectorALabel: "المتجه A",
                vectorBLabel: "المتجه B",
                resultLabel: "النتيجة",
                operationDefault: "حدد عملية للتصور",
                inputsTitle: "مدخلات المتجهات",
                vectorATitle: "المتجه A",
                vectorBTitle: "المتجه B",
                scalarLabel: "العدد القياسي (لضرب)",
                updateBtn: "تحديث المتجهات",
                addBtn: "الجمع",
                subBtn: "الطرح",
                multBtn: "الضرب القياسي",
                crossBtn: "الضرب الاتجاهي",
                workBtn: "الشغل (الضرب النقطي)",
                torqueBtn: "العزم",
                instructions: "اسحب للتدوير • مرر للتكبير/التصغير • انقر بزر الماوس الأيمن للتحريك",
                additionDesc: "جمع المتجهات: A + B يجمع المتجهات من الرأس إلى الذيل",
                subtractionDesc: "طرح المتجهات: A - B يجد الفرق بين المتجهات",
                multiplicationDesc: "الضرب القياسي يقيس حجم المتجه",
                crossProductDesc: "الضرب الاتجاهي ينتج متجهًا عموديًا على كلا متجهي الإدخال",
                workDesc: "الشغل (الضرب النقطي) يحسب نقل الطاقة من خلال القوة والإزاحة",
                torqueDesc: "يقيس العزم قوة الدوران باستخدام متجهات الموضع والقوة",
                highContrastOn: "تم تمكين وضع التباين العالي",
                highContrastOff: "تم تعطيل وضع التباين العالي",
                largeLabelsOn: "تم تمكين التسميات الكبيرة",
                largeLabelsOff: "تم تعطيل التسميات الكبيرة",
                sceneDescription: "تصور متجه ثلاثي الأبعاد يظهر عملية {operation}. المتجه الأحمر A، المتجه الأزرق B، المتجه الناتج الأخضر. استخدم الفأرة للتدوير والتكبير/التصغير والتحريك.",
                vector: "المتجه",
                notUsed: "غير مستخدم",
                force: "القوة",
                displacement: "الإزاحة",
                position: "الموضع",
                forceVector: "متجه القوة",
                displacementVector: "متجه الإزاحة",
                positionVector: "متجه الموضع",
                workUnit: "جول",
                magnitude: "المقدار",
                direction: "الاتجاه",
                angle: "الزاوية",
                degrees: "درجة"
            }
        };

        // Language management
        let currentLanguage = localStorage.getItem('vectorLanguage') || 'en';
        let numberFormatter = new Intl.NumberFormat('en', { minimumFractionDigits: 1, maximumFractionDigits: 2 });

        // Initialize language on load
        function initializeLanguage() {
            const languageSelect = document.getElementById('vector-language');
            languageSelect.value = currentLanguage;
            updateVectorLanguage(currentLanguage);
        }

        function updateVectorLanguage(lang) {
            currentLanguage = lang;
            localStorage.setItem('vectorLanguage', lang);
            
            // Update number formatter for the selected language
            const localeMap = {
                'en': 'en-US',
                'es': 'es-ES',
                'fr': 'fr-FR',
                'de': 'de-DE',
                'zh': 'zh-CN',
                'ja': 'ja-JP',
                'ar': 'ar-SA'
            };
            
            numberFormatter = new Intl.NumberFormat(localeMap[lang] || 'en-US', {
                minimumFractionDigits: 1,
                maximumFractionDigits: 2
            });
            
            // Get translations with fallback to English
            const t = getTranslations(lang);
            
            // Update all UI text content
            updateUIText(t);
            
            // Update visualization if an operation is active
            const activeButton = document.querySelector('#controls button.active');
            if (activeButton) {
                updateVisualization(activeButton.id.replace('-btn', ''));
            }
            
            // Announce language change to screen reader
            const languageNames = {
                'en': 'English',
                'es': 'Spanish',
                'fr': 'French',
                'de': 'German',
                'zh': 'Chinese',
                'ja': 'Japanese',
                'ar': 'Arabic'
            };
            announceToScreenReader(`Language changed to ${languageNames[lang] || lang}`);
        }

        // Get translations with fallback to English for missing keys
        function getTranslations(lang) {
            const defaultTranslations = vectorTranslations.en;
            const targetTranslations = vectorTranslations[lang] || {};
            
            // Create a merged object with fallback to English
            return new Proxy(targetTranslations, {
                get: function(target, prop) {
                    if (prop in target) {
                        return target[prop];
                    }
                    return defaultTranslations[prop] || prop;
                }
            });
        }

        // Update all UI text elements
        function updateUIText(t) {
            // Navigation buttons
            document.getElementById('nav-back').textContent = t.navBack;
            document.getElementById('nav-basic').textContent = t.navBasic;
            document.getElementById('nav-advanced').textContent = t.navAdvanced;
            
            // Accessibility panel
            document.getElementById('accessibility-label').textContent = t.accessibilityLabel;
            document.getElementById('btn-high-contrast').textContent = t.btnHighContrast;
            document.getElementById('btn-large-labels').textContent = t.btnLargeLabels;
            document.getElementById('btn-describe').textContent = t.btnDescribe;
            document.getElementById('language-label').textContent = t.languageLabel;
            
            // Info panel
            document.getElementById('panel-title').textContent = t.panelTitle;
            document.getElementById('vector-a-label').textContent = t.vectorALabel;
            document.getElementById('vector-b-label').textContent = t.vectorBLabel;
            document.getElementById('result-label').textContent = t.resultLabel;
            document.getElementById('operation-default').textContent = t.operationDefault;
            
            // Inputs panel
            document.getElementById('inputs-title').textContent = t.inputsTitle;
            document.getElementById('vector-a-title').textContent = t.vectorATitle;
            document.getElementById('vector-b-title').textContent = t.vectorBTitle;
            document.getElementById('scalar-label').textContent = t.scalarLabel;
            document.getElementById('update-btn').textContent = t.updateBtn;
            
            // Instructions
            document.getElementById('instructions').textContent = t.instructions;
            
            // Operation buttons
            document.getElementById('add-btn').textContent = t.addBtn;
            document.getElementById('sub-btn').textContent = t.subBtn;
            document.getElementById('mult-btn').textContent = t.multBtn;
            document.getElementById('cross-btn').textContent = t.crossBtn;
            document.getElementById('work-btn').textContent = t.workBtn;
            document.getElementById('torque-btn').textContent = t.torqueBtn;
        }

        // Enhanced Accessibility Functions
        function toggleHighContrast() {
            document.body.classList.toggle('high-contrast');
            document.getElementById('container').classList.toggle('high-contrast-vectors');
            const button = event.target;
            const isActive = button.classList.toggle('active');
            button.setAttribute('aria-pressed', isActive);
            const t = getTranslations(currentLanguage);
            announceToScreenReader(isActive ? t.highContrastOn : t.highContrastOff);
        }

        function toggleVectorLabels() {
            const vectors = document.querySelectorAll('.coordinate-display');
            vectors.forEach(vector => {
                vector.style.fontSize = vector.style.fontSize === '16px' ? '12px' : '16px';
                vector.style.fontWeight = vector.style.fontWeight === 'bold' ? 'normal' : 'bold';
            });
            const button = event.target;
            const isActive = button.classList.toggle('active');
            button.setAttribute('aria-pressed', isActive);
            const t = getTranslations(currentLanguage);
            announceToScreenReader(isActive ? t.largeLabelsOn : t.largeLabelsOff);
        }

        function describeScene() {
            const activeOp = document.querySelector('#controls button.active');
            const operation = activeOp ? activeOp.id.replace('-btn', '') : 'none';
            const t = getTranslations(currentLanguage);
            
            const operationNames = {
                'add': t.addBtn.toLowerCase(),
                'sub': t.subBtn.toLowerCase(),
                'mult': t.multBtn.toLowerCase(),
                'cross': t.crossBtn.toLowerCase(),
                'work': t.workBtn.toLowerCase(),
                'torque': t.torqueBtn.toLowerCase()
            };
            
            const description = t.sceneDescription.replace('{operation}', operationNames[operation] || '');
            document.getElementById('text-alternative').style.display = 'block';
            document.getElementById('text-alternative').textContent = description;
            announceToScreenReader(description);
        }

        function announceToScreenReader(message) {
            const announcer = document.getElementById('sr-announce');
            announcer.textContent = message;
            setTimeout(() => {
                announcer.textContent = '';
            }, 1000);
        }

        // Three.js Scene Initialization (unchanged from your original code)
        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0x1a2a6c);
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.set(5, 5, 5);
        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.getElementById('container').appendChild(renderer.domElement);
        const controls = new THREE.OrbitControls(camera, renderer.domElement);
        controls.enableDamping = true;
        controls.dampingFactor = 0.05;
        controls.rotateSpeed = 0.5;
        controls.enablePan = true;
        const axesHelper = new THREE.AxesHelper(5);
        scene.add(axesHelper);
        const gridHelper = new THREE.GridHelper(10, 10, 0x1e90ff, 0x1e90ff);
        gridHelper.material.opacity = 0.5;
        gridHelper.material.transparent = true;
        scene.add(gridHelper);
        let vectorA = new THREE.Vector3(2, 3, 1);
        let vectorB = new THREE.Vector3(1, -1, 2);
        const origin = new THREE.Vector3(0, 0, 0);
        let arrowA = new THREE.ArrowHelper(vectorA.clone().normalize(), origin, vectorA.length(), 0xff0000, 0.4, 0.2);
        scene.add(arrowA);
        let arrowB = new THREE.ArrowHelper(vectorB.clone().normalize(), origin, vectorB.length(), 0x0000ff, 0.4, 0.2);
        scene.add(arrowB);
        let arrowResult = new THREE.ArrowHelper(new THREE.Vector3(0, 1, 0), origin, 1, 0x00ff00, 0.4, 0.2);
        arrowResult.visible = false;
        scene.add(arrowResult);
        const sphereGeometry = new THREE.SphereGeometry(0.1, 16, 16);
        const sphereA = new THREE.Mesh(sphereGeometry, new THREE.MeshBasicMaterial({ color: 0xff0000 }));
        sphereA.position.copy(vectorA);
        scene.add(sphereA);
        const sphereB = new THREE.Mesh(sphereGeometry, new THREE.MeshBasicMaterial({ color: 0x0000ff }));
        sphereB.position.copy(vectorB);
        scene.add(sphereB);
        const sphereResult = new THREE.Mesh(sphereGeometry, new THREE.MeshBasicMaterial({ color: 0x00ff00 }));
        sphereResult.visible = false;
        scene.add(sphereResult);
        const coordA = document.createElement('div');
        coordA.className = 'coordinate-display';
        coordA.style.color = '#ff0000';
        document.getElementById('container').appendChild(coordA);
        const coordB = document.createElement('div');
        coordB.className = 'coordinate-display';
        coordB.style.color = '#0000ff';
        document.getElementById('container').appendChild(coordB);
        const coordResult = document.createElement('div');
        coordResult.className = 'coordinate-display';
        coordResult.style.color = '#00ff00';
        document.getElementById('container').appendChild(coordResult);

        // Enhanced updateVectorLabels with dynamic translations
        function updateVectorLabels(operation) {
            const vectorALabel = document.getElementById('vector-a-label');
            const vectorBLabel = document.getElementById('vector-b-label');
            const vectorATitle = document.getElementById('vector-a-title');
            const vectorBTitle = document.getElementById('vector-b-title');
            const scalarInputGroup = document.getElementById('scalar-input-group');
            const t = getTranslations(currentLanguage);
            
            switch(operation) {
                case 'add':
                    vectorALabel.textContent = t.vectorALabel;
                    vectorBLabel.textContent = t.vectorBLabel;
                    vectorATitle.textContent = t.vectorATitle;
                    vectorBTitle.textContent = t.vectorBTitle;
                    scalarInputGroup.style.display = 'none';
                    break;
                case 'sub':
                    vectorALabel.textContent = t.vectorALabel;
                    vectorBLabel.textContent = t.vectorBLabel;
                    vectorATitle.textContent = t.vectorATitle;
                    vectorBTitle.textContent = t.vectorBTitle;
                    scalarInputGroup.style.display = 'none';
                    break;
                case 'mult':
                    vectorALabel.textContent = t.vector;
                    vectorBLabel.textContent = t.notUsed;
                    vectorATitle.textContent = t.vector;
                    vectorBTitle.textContent = t.notUsed;
                    scalarInputGroup.style.display = 'block';
                    break;
                case 'cross':
                    vectorALabel.textContent = t.vectorALabel;
                    vectorBLabel.textContent = t.vectorBLabel;
                    vectorATitle.textContent = t.vectorATitle;
                    vectorBTitle.textContent = t.vectorBTitle;
                    scalarInputGroup.style.display = 'none';
                    break;
                case 'work':
                    vectorALabel.textContent = `${t.force} (F)`;
                    vectorBLabel.textContent = `${t.displacement} (d)`;
                    vectorATitle.textContent = `${t.forceVector} (F)`;
                    vectorBTitle.textContent = `${t.displacementVector} (d)`;
                    scalarInputGroup.style.display = 'none';
                    break;
                case 'torque':
                    vectorALabel.textContent = `${t.position} (r)`;
                    vectorBLabel.textContent = `${t.force} (F)`;
                    vectorATitle.textContent = `${t.positionVector} (r)`;
                    vectorBTitle.textContent = `${t.forceVector} (F)`;
                    scalarInputGroup.style.display = 'none';
                    break;
            }
        }

        // Enhanced updateCoordinateDisplays with dynamic translations
        function updateCoordinateDisplays() {
            const vectorToScreen = (vector) => {
                const vector3 = new THREE.Vector3(vector.x, vector.y, vector.z);
                vector3.project(camera);
                const x = (vector3.x * 0.5 + 0.5) * window.innerWidth;
                const y = (-vector3.y * 0.5 + 0.5) * window.innerHeight;
                return { x, y };
            };
            
            const t = getTranslations(currentLanguage);
            
            const screenA = vectorToScreen(vectorA);
            coordA.textContent = `${document.getElementById('vector-a-label').textContent} (${numberFormatter.format(vectorA.x)}, ${numberFormatter.format(vectorA.y)}, ${numberFormatter.format(vectorA.z)})`;
            coordA.style.left = `${screenA.x + 15}px`;
            coordA.style.top = `${screenA.y}px`;
            
            const screenB = vectorToScreen(vectorB);
            coordB.textContent = `${document.getElementById('vector-b-label').textContent} (${numberFormatter.format(vectorB.x)}, ${numberFormatter.format(vectorB.y)}, ${numberFormatter.format(vectorB.z)})`;
            coordB.style.left = `${screenB.x + 15}px`;
            coordB.style.top = `${screenB.y}px`;
            
            if (arrowResult.visible) {
                const resultVector = getResultVector();
                const screenResult = vectorToScreen(resultVector);
                coordResult.textContent = `${document.getElementById('result-label').textContent} (${numberFormatter.format(resultVector.x)}, ${numberFormatter.format(resultVector.y)}, ${numberFormatter.format(resultVector.z)})`;
                coordResult.style.left = `${screenResult.x + 15}px`;
                coordResult.style.top = `${screenResult.y}px`;
                coordResult.style.display = 'block';
            } else {
                coordResult.style.display = 'none';
            }
        }

        // Enhanced getResultVector with dynamic calculations
        function getResultVector() {
            const operation = document.querySelector('#controls button.active')?.id.replace('-btn', '') || '';
            let resultVector;
            
            switch(operation) {
                case 'add':
                    resultVector = vectorA.clone().add(vectorB);
                    break;
                case 'sub':
                    resultVector = vectorA.clone().sub(vectorB);
                    break;
                case 'mult':
                    const scalar = parseFloat(document.getElementById('scalar').value);
                    resultVector = vectorA.clone().multiplyScalar(scalar);
                    break;
                case 'cross':
                    resultVector = new THREE.Vector3().crossVectors(vectorA, vectorB);
                    break;
                case 'work':
                    const force = vectorA;
                    const displacement = vectorB;
                    const work = force.dot(displacement);
                    resultVector = displacement.clone().normalize().multiplyScalar(work / displacement.length());
                    break;
                case 'torque':
                    const position = vectorA;
                    const forceVector = vectorB;
                    resultVector = new THREE.Vector3().crossVectors(position, forceVector);
                    break;
                default:
                    resultVector = new THREE.Vector3(0, 0, 0);
            }
            return resultVector;
        }

        // Enhanced updateVisualization with dynamic content
        function updateVisualization(operation) {
            arrowResult.visible = true;
            sphereResult.visible = true;
            let resultVector, infoText;
            const t = getTranslations(currentLanguage);
            
            switch(operation) {
                case 'add':
                    resultVector = vectorA.clone().add(vectorB);
                    infoText = `<p><strong>${t.addBtn}:</strong> A + B</p>
                               <p>A = (${numberFormatter.format(vectorA.x)}, ${numberFormatter.format(vectorA.y)}, ${numberFormatter.format(vectorA.z)})</p>
                               <p>B = (${numberFormatter.format(vectorB.x)}, ${numberFormatter.format(vectorB.y)}, ${numberFormatter.format(vectorB.z)})</p>
                               <p>${t.resultLabel} = (${numberFormatter.format(resultVector.x)}, ${numberFormatter.format(resultVector.y)}, ${numberFormatter.format(resultVector.z)})</p>
                               <p><em>${t.additionDesc}</em></p>`;
                    break;
                case 'sub':
                    resultVector = vectorA.clone().sub(vectorB);
                    infoText = `<p><strong>${t.subBtn}:</strong> A - B</p>
                               <p>A = (${numberFormatter.format(vectorA.x)}, ${numberFormatter.format(vectorA.y)}, ${numberFormatter.format(vectorA.z)})</p>
                               <p>B = (${numberFormatter.format(vectorB.x)}, ${numberFormatter.format(vectorB.y)}, ${numberFormatter.format(vectorB.z)})</p>
                               <p>${t.resultLabel} = (${numberFormatter.format(resultVector.x)}, ${numberFormatter.format(resultVector.y)}, ${numberFormatter.format(resultVector.z)})</p>
                               <p><em>${t.subtractionDesc}</em></p>`;
                    break;
                case 'mult':
                    const scalar = parseFloat(document.getElementById('scalar').value);
                    resultVector = vectorA.clone().multiplyScalar(scalar);
                    infoText = `<p><strong>${t.multBtn}:</strong> ${numberFormatter.format(scalar)} × A</p>
                               <p>A = (${numberFormatter.format(vectorA.x)}, ${numberFormatter.format(vectorA.y)}, ${numberFormatter.format(vectorA.z)})</p>
                               <p>${t.scalarLabel} = ${numberFormatter.format(scalar)}</p>
                               <p>${t.resultLabel} = (${numberFormatter.format(resultVector.x)}, ${numberFormatter.format(resultVector.y)}, ${numberFormatter.format(resultVector.z)})</p>
                               <p><em>${t.multiplicationDesc}</em></p>`;
                    break;
                case 'cross':
                    resultVector = new THREE.Vector3().crossVectors(vectorA, vectorB);
                    infoText = `<p><strong>${t.crossBtn}:</strong> A × B</p>
                               <p>A = (${numberFormatter.format(vectorA.x)}, ${numberFormatter.format(vectorA.y)}, ${numberFormatter.format(vectorA.z)})</p>
                               <p>B = (${numberFormatter.format(vectorB.x)}, ${numberFormatter.format(vectorB.y)}, ${numberFormatter.format(vectorB.z)})</p>
                               <p>${t.resultLabel} = (${numberFormatter.format(resultVector.x)}, ${numberFormatter.format(resultVector.y)}, ${numberFormatter.format(resultVector.z)})</p>
                               <p><em>${t.crossProductDesc}</em></p>`;
                    break;
                case 'work':
                    const force = vectorA;
                    const displacement = vectorB;
                    const work = force.dot(displacement);
                    resultVector = displacement.clone().normalize().multiplyScalar(work / displacement.length());
                    infoText = `<p><strong>${t.workBtn}:</strong> W = F • d</p>
                               <p>F = (${numberFormatter.format(force.x)}, ${numberFormatter.format(force.y)}, ${numberFormatter.format(force.z)})</p>
                               <p>d = (${numberFormatter.format(displacement.x)}, ${numberFormatter.format(displacement.y)}, ${numberFormatter.format(displacement.z)})</p>
                               <p>W = F • d = ${numberFormatter.format(work)} ${t.workUnit}</p>
                               <p><em>${t.workDesc}</em></p>`;
                    break;
                case 'torque':
                    const position = vectorA;
                    const forceVector = vectorB;
                    resultVector = new THREE.Vector3().crossVectors(position, forceVector);
                    infoText = `<p><strong>${t.torqueBtn}:</strong> τ = r × F</p>
                               <p>r = (${numberFormatter.format(position.x)}, ${numberFormatter.format(position.y)}, ${numberFormatter.format(position.z)})</p>
                               <p>F = (${numberFormatter.format(forceVector.x)}, ${numberFormatter.format(forceVector.y)}, ${numberFormatter.format(forceVector.z)})</p>
                               <p>τ = (${numberFormatter.format(resultVector.x)}, ${numberFormatter.format(resultVector.y)}, ${numberFormatter.format(resultVector.z)})</p>
                               <p><em>${t.torqueDesc}</em></p>`;
                    break;
            }
            
            arrowResult.setDirection(resultVector.clone().normalize());
            arrowResult.setLength(resultVector.length(), 0.4, 0.2);
            sphereResult.position.copy(resultVector);
            document.getElementById('operation-info').innerHTML = infoText;
            updateVectorLabels(operation);
            updateCoordinateDisplays();
        }

        // Rest of the functions remain the same as your original code
        function updateVectors() {
            const ax = parseFloat(document.getElementById('a-x').value) || 0;
            const ay = parseFloat(document.getElementById('a-y').value) || 0;
            const az = parseFloat(document.getElementById('a-z').value) || 0;
            const bx = parseFloat(document.getElementById('b-x').value) || 0;
            const by = parseFloat(document.getElementById('b-y').value) || 0;
            const bz = parseFloat(document.getElementById('b-z').value) || 0;
            vectorA.set(ax, ay, az);
            vectorB.set(bx, by, bz);
            scene.remove(arrowA);
            scene.remove(arrowB);
            arrowA = new THREE.ArrowHelper(vectorA.clone().normalize(), origin, vectorA.length(), 0xff0000, 0.4, 0.2);
            scene.add(arrowA);
            arrowB = new THREE.ArrowHelper(vectorB.clone().normalize(), origin, vectorB.length(), 0x0000ff, 0.4, 0.2);
            scene.add(arrowB);
            sphereA.position.copy(vectorA);
            sphereB.position.copy(vectorB);
            const activeButton = document.querySelector('#controls button.active');
            if (activeButton) {
                updateVisualization(activeButton.id.replace('-btn', ''));
            }
        }

        function setActiveButton(activeButton) {
            document.querySelectorAll('#controls button').forEach(btn => btn.classList.remove('active'));
            activeButton.classList.add('active');
        }

        // Initialize with enhanced language support
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize language
            initializeLanguage();
            
            // Set up event listeners
            document.getElementById('add-btn').addEventListener('click', function() {
                setActiveButton(this);
                updateVectorLabels('add');
                updateVisualization('add');
            });
            document.getElementById('sub-btn').addEventListener('click', function() {
                setActiveButton(this);
                updateVectorLabels('sub');
                updateVisualization('sub');
            });
            document.getElementById('mult-btn').addEventListener('click', function() {
                setActiveButton(this);
                updateVectorLabels('mult');
                updateVisualization('mult');
            });
            document.getElementById('cross-btn').addEventListener('click', function() {
                setActiveButton(this);
                updateVectorLabels('cross');
                updateVisualization('cross');
            });
            document.getElementById('work-btn').addEventListener('click', function() {
                setActiveButton(this);
                updateVectorLabels('work');
                updateVisualization('work');
            });
            document.getElementById('torque-btn').addEventListener('click', function() {
                setActiveButton(this);
                updateVectorLabels('torque');
                updateVisualization('torque');
            });
            document.getElementById('update-btn').addEventListener('click', updateVectors);
            
            // Start with addition operation
            document.getElementById('add-btn').click();
        });

        function animate() {
            requestAnimationFrame(animate);
            controls.update();
            updateCoordinateDisplays();
            renderer.render(scene, camera);
        }
        animate();

        window.addEventListener('resize', function() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
            updateCoordinateDisplays();
        });
    </script>
</body>
</html>